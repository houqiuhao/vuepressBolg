---
title: js事件循环与node事件循环
date: 2022-04-08 22:22:55
permalink: /pages/51b2e2/
categories:
  - 前端基础
  - js
tags:
  - 
---

前几天同事问我个问题，说他想延迟两秒后再执行后面的操作，但是 await 了一个 setTimeout 后没生效，后面的直接执行了
嗨 my homie，事件循环啊兄弟👀 
> await 后面直接执行 setTimeout 只会让 setTimeout 中的函数加入事件队列而已，并不能阻塞
    可以使用这个方式： sleep = (delay) => new Promise((resolve,reject) => setTimeout(resolve, delay))
由此可见事件循环不止是面试中用的，实际开发中也会遇到类似的问题，所以今天对事件循环做一个整理

# js中的事件循环
js 中存在同步和异步任务，而异步任务又分为宏任务和微任务，事件循环中会优先执行同步任务，遇到异步任务的时候会将任务加入任务队列，待同步任务执行完之后再去执行异步任务，异步任务中又分宏任务和微任务，每次事件循环执行完成同步任务时，会先执行微任务，再执行宏任务，每当执行完一次宏任务会查看下有没有微任务，如果有就会先执行完微任务。

# node中的事件循环